#!/bin/bash
set -uo pipefail
IFS=$'\n\t'

# Defines some global variables for colors.
normal=$(tput sgr0)
red=$(tput setaf 1)
green=$(tput setaf 2)
yellow=$(tput setaf 3)

function main() {
    help_msg="Usage: bash ./bin/functions.sh <command>
    Available commands:
        install_wp_cli: Installs WP-CLI."
    valid_commands=("install_wp_cli")

    if [ -z "$1" ]; then
        echo "${red}No command specified.${normal}"
        echo "${help_msg}"
        exit 1;
    fi

    if [ "$1" == "help" ]; then
        echo "${help_msg}"
        exit 0;
    fi

    # Check for a valid command.
    if [ ! " ${function_names[@]} " =~ " $1 " ]; then
        echo "${red}Invalid command specified.${normal}"
        echo "${help_msg}"
        exit 1;
    fi

    # Execute the command passed.
    "$1"

}

function install_wp_cli() {
    cd /tmp/wordpress
    curl -O https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar
    chmod +x wp-cli.phar
    sudo mv wp-cli.phar /usr/local/bin/wp
}